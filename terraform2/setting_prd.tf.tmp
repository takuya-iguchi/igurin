module "prd" {
  source = "./module/aws/prd"

  #####################################
  # Common Settings
  #####################################
  vpc_id = "${module.all.vpc_id}"
  igw_id = "${module.all.igw_id}"
  tags = {"Terraform" = "true" "env" = "prd"}


  #####################################
  # VPC Settings
  #####################################
  azs             = ["ap-northeast-1a", "ap-northeast-1c"]

  public_subnets  = ["10.36.16.0/22", "10.36.44.0/22"]
  public_subnets_name = ["sakura_prd_public_01_a", "sakura_prd_public_01_c"]
  private_subnets = ["10.36.36.0/22", "10.36.40.0/22"]
  private_subnets_name = ["sakura_prd_private_01_a", "sakura_prd_private_01_c"]
  private_route_table_name = ["sakura_prd_private_01_a", "sakura_prd_private_01_c"]
  public_route_table_name = "sakura_prd_public_01"
  create_database_subnet_group = "true"
  db_subnet_gourp_name    = "sakura"
  db_subnet_gourp_description = "sakura"
  create_elasticache_subnet_group = "true"
  elasticache_subnet_gourp_name = "sakura"
  elasticache_subnet_gourp_description  = "sakura"

  #####################################
  # Security Group Settings
  #####################################
  sg_name = ["prd"]
  sg_description = ["prd"]
  cidr_blocks = ["0.0.0.0/0", "202.32.5.153/32"]
  from_port   = [80, 0]
  to_port     = [80, 0]
  protocol    = ["tcp", "-1"]

  egress_cidr_blocks  = ["0.0.0.0/0"]
  egress_from_port    = [0]
  egress_to_port      = [0]
  egress_protocol     = ["-1"]

  #####################################
  # EC2 Instance Settings
  #####################################
  ec2_name = ["sakura"]
  instance_type = ["t2.nano"]
  subnet_id = ["${module.prd.public_subnets}"]
  key_name = "WEB"
  monitoring = "true"
  iam_instance_profile = "EC2"
  private_ip = ["10.36.44.10"]
  ebs_optimized = "false"
  root_block_device = [{volume_size = "30" volume_type = "gp2"}]
  ebs_block_device = [{device_name = "/dev/sdf" volume_size = "100" volume_type = "gp2" encrypted = "true"}]
  availability_zone = ["ap-northeast-1c"]

  #####################################
  # DB Settings
  #####################################
  ##DBパラメータは「./module/aws/prd/aurora内で設定」

  monitoring_role_name = "rds-monitoring-role"

  cluster_name  = "sakura"
  database_name = "sakura"
  username      = "sakura"
  password      = "sakurasakura"
  backup        = "1"
  backup_window = "17:54-18:24"
  mente_window  = "wed:01:00-wed:01:30"
  port          = "3306"
  storage_encrypted = "False"

  instance_name = "db"
  cluster_instance_count = "1"
  cluster_instance_class = "db.t2.small"
  monitor_intarval = "60"

  parameter_group_name = "pg"
  parameter_group_description = "test"

  cluster_parameter_group_name = "cpg"
  cluster_parameter_description = "test"


  #####################################
  # Beanstalk Settings
  #####################################
  ##「./module/aws/prd/beanstalk内で設定」
}
